<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IME Test</title>
</head>
<body>
    <h1>한글 IME 이벤트 테스트</h1>
    <input type="text" id="testInput" placeholder="한글을 입력하세요">
    <div id="log" style="margin-top: 20px; font-family: monospace; white-space: pre;"></div>

    <script>
        const input = document.getElementById('testInput');
        const log = document.getElementById('log');
        let isComposing = false;

        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString('ko-KR', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit', fractionalSecondDigits: 3 });
            log.textContent += `[${timestamp}] ${message}\n`;
            log.scrollTop = log.scrollHeight;
        }

        input.addEventListener('compositionstart', function(e) {
            isComposing = true;
            addLog(`compositionstart: data="${e.data}", value="${this.value}", isComposing=${isComposing}`);
        });

        input.addEventListener('compositionupdate', function(e) {
            addLog(`compositionupdate: data="${e.data}", value="${this.value}", isComposing=${isComposing}`);
        });

        input.addEventListener('compositionend', function(e) {
            isComposing = false;
            addLog(`compositionend: data="${e.data}", value="${this.value}", isComposing=${isComposing}`);
        });

        input.addEventListener('input', function(e) {
            addLog(`input: value="${this.value}", isComposing=${isComposing}, inputType="${e.inputType}"`);
        });

        input.addEventListener('keydown', function(e) {
            addLog(`keydown: key="${e.key}", isComposing=${isComposing}`);
        });
    </script>
</body>
</html>
